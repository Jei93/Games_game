<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industry Evolution Simulator | Game Dev Tycoon</title>
    <style>
        :root {
            --bg: #0F172A;
            --panel: #1E293B;
            --accent: #3B82F6;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --text: #F1F5F9;
            --text-secondary: #94A3B8;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            overflow: hidden;
        }

        .game-container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            height: 100vh;
            gap: 20px;
            padding: 20px;
        }

        .sidebar, .main, .event-panel {
            background: var(--panel);
            border-radius: 12px;
            padding: 20px;
            overflow-y: auto;
        }

        .sidebar h2, .event-panel h2 {
            font-size: 1.25rem;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .resource {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .resource-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }

        .resource-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease;
        }

        .main-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .main-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .year-display {
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent);
            margin: 10px 0;
        }

        .decision-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .decision-card h3 {
            margin-bottom: 15px;
            color: var(--accent);
        }

        .decision-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .decision-btn {
            background: var(--panel);
            border: 2px solid var(--accent);
            color: var(--text);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .decision-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }

        .decision-btn.danger { border-color: var(--danger); }
        .decision-btn.danger:hover { background: var(--danger); }

        .decision-btn.success { border-color: var(--success); }
        .decision-btn.success:hover { background: var(--success); }

        .event {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent);
        }

        .event.danger { border-left-color: var(--danger); }
        .event.success { border-left-color: var(--success); }
        .event.warning { border-left-color: var(--warning); }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            place-items: center;
        }

        .modal.active {
            display: grid;
        }

        .modal-content {
            background: var(--panel);
            padding: 40px;
            border-radius: 16px;
            max-width: 600px;
            text-align: center;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        @media (max-width: 1024px) {
            .game-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- PANEL DE RECURSOS -->
        <div class="sidebar">
            <h2>üìä Studio Resources</h2>
            
            <div class="resource">
                <span>Cash</span>
                <span id="cash">$500K</span>
            </div>
            <div class="resource-bar">
                <div class="resource-fill" id="cashBar" style="width: 50%; background: #10B981;"></div>
            </div>

            <div class="resource">
                <span>Equipo</span>
                <span id="team">15 / 50</span>
            </div>
            <div class="resource-bar">
                <div class="resource-fill" id="teamBar" style="width: 30%; background: #3B82F6;"></div>
            </div>

            <div class="resource">
                <span>Reputaci√≥n</span>
                <span id="reputation">65%</span>
            </div>
            <div class="resource-bar">
                <div class="resource-fill" id="repBar" style="width: 65%; background: #F59E0B;"></div>
            </div>

            <div class="resource">
                <span>Moral del Equipo</span>
                <span id="morale">75%</span>
            </div>
            <div class="resource-bar">
                <div class="resource-fill" id="moraleBar" style="width: 75%; background: #8B5CF6;"></div>
            </div>

            <div class="resource">
                <span>Proyectos Exitosos</span>
                <span id="projects">3 / 8</span>
            </div>

            <button class="decision-btn success" onclick="hireStaff()" style="margin-top: 20px; width: 100%;">
                üíº Contratar Personal (+$50K)
            </button>
            <button class="decision-btn" onclick="investTech()" style="margin-top: 10px; width: 100%;">
                üî¨ Invertir en I+D (+$30K)
            </button>
        </div>

        <!-- ZONA PRINCIPAL -->
        <div class="main">
            <div class="main-header">
                <h1>Industry Evolution Simulator</h1>
                <div class="year-display" id="currentYear">2000</div>
                <p id="currentProblem">Modelo retail, primeros DRM. La industria AAA est√° en expansi√≥n controlada.</p>
            </div>

            <div class="decision-card">
                <h3>üéØ Decision Estrat√©gica</h3>
                <p id="decisionContext">Elige tu estrategia para este a√±o. El mercado est√° en fase <strong>Retail/DRM</strong>.</p>
                
                <div class="decision-options">
                    <button class="decision-btn" onclick="makeDecision('conservative')">
                        üõ°Ô∏è Estrategia Conservadora<br>
                        <small>Menos riesgo, menor retorno</small>
                    </button>
                    <button class="decision-btn" onclick="makeDecision('balanced')">
                        ‚öñÔ∏è Enfoque Balanceado<br>
                        <small>Riesgo moderado</small>
                    </button>
                    <button class="decision-btn danger" onclick="makeDecision('aggressive')">
                        üöÄ Estrategia Agresiva<br>
                        <small>Alto riesgo, alto retorno</small>
                    </button>
                </div>
            </div>

            <div class="decision-card">
                <h3>üìà Proyecto Activo</h3>
                <p id="projectStatus">No hay proyecto activo.</p>
                <button class="decision-btn success" onclick="startProject()">üéÆ Iniciar Nuevo Proyecto</button>
            </div>

            <div class="decision-card">
                <h3>üìä Estad√≠sticas de la Partida</h3>
                <div id="gameStats" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <div>ROI: <span id="roi">0%</span></div>
                    <div>Tasa √âxito: <span id="successRate">37.5%</span></div>
                    <div>Market Share: <span id="marketShare">2.3%</span></div>
                    <div>Mejor Juego: <span id="bestGame">‚Äî</span></div>
                </div>
            </div>
        </div>

        <!-- PANEL DE EVENTOS -->
        <div class="event-panel">
            <h2>üì∞ Industry Events</h2>
            <div id="eventLog">
                <div class="event">
                    <strong>A√±o 2000:</strong> Tu estudio se funda con $500K y 15 desarrolladores.
                </div>
            </div>
            <button class="decision-btn" onclick="saveGame()" style="margin-top: 20px; width: 100%;">
                üíæ Guardar Partida
            </button>
        </div>
    </div>

    <!-- MODAL DE PROYECTOS -->
    <div class="modal" id="projectModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2>üéÆ Nuevo Proyecto</h2>
            <p>Selecciona el tipo de juego a desarrollar:</p>
            <div style="margin: 20px 0;">
                <button class="decision-btn" onclick="selectProject('aaa', 200000)">
                    üéñÔ∏è AAA - Budget: $200K<br>
                    <small>Alto riesgo, alta visibilidad</small>
                </button>
                <button class="decision-btn" onclick="selectProject('aa', 80000)">
                    üéØ AA - Budget: $80K<br>
                    <medium>Riesgo moderado, calidad enfocada</medium>
                </button>
                <button class="decision-btn" onclick="selectProject('indie', 30000)">
                    üí° Indie - Budget: $30K<br>
                    <small>Bajo riesgo, creatividad m√°xima</small>
                </button>
            </div>
        </div>
    </div>

    <script>
        // üíº ESTADO DEL JUEVO
        const gameState = {
            year: 2000,
            cash: 500000,
            team: 15,
            maxTeam: 50,
            reputation: 65,
            morale: 75,
            completedProjects: 0,
            successfulProjects: 0,
            totalRevenue: 0,
            activeProject: null,
            marketShare: 0,
            decisions: []
        };

        // üéØ PROBLEMAS HIST√ìRICOS COMO EVENTOS
        const historicalPhases = [
            { year: 2000, problem: "Modelo retail, primeros DRM; expansi√≥n controlada AAA", focus: "distribution" },
            { year: 2004, problem: "Caso 'EA Spouse'; debate sobre crunch", focus: "labor" },
            { year: 2005, problem: "Altos costes, brecha consola/PC, crisis creativa", focus: "budget" },
            { year: 2012, problem: "Microtransacciones, servicios en vivo, menos riesgo", focus: "monetization" },
            { year: 2017, problem: "Loot boxes, monetizaci√≥n agresiva, crunch masivo", focus: "ethics" },
            { year: 2020, problem: "Live service dominante, fusiones, p√©rdida identidad", focus: "identity" },
            { year: 2023, problem: "Despidos masivos, cierres de estudios, auge indie", focus: "survival" }
        ];

        // üé≤ SISTEMA DE DECISIONES BASADO EN DATOS REALES
        function makeDecision(strategy) {
            const currentPhase = getCurrentPhase();
            const baseMultiplier = getMultiplierByPhase(currentPhase, strategy);
            
            // Calcular √©xito basado en moral, reputaci√≥n y estrategia
            const successChance = calculateSuccessChance(strategy, baseMultiplier);
            const budget = strategy === 'conservative' ? 50000 : strategy === 'balanced' ? 100000 : 200000;
            
            if (gameState.cash < budget) {
                addEvent('danger', `No tienes suficiente cash para una estrategia ${strategy}.`);
                return;
            }

            gameState.cash -= budget;
            gameState.morale = Math.max(0, gameState.morale - 10);
            
            const success = Math.random() < successChance;
            const revenue = success ? budget * (1.5 + (gameState.reputation / 100)) : 0;
            
            gameState.cash += revenue;
            gameState.totalRevenue += revenue;
            gameState.completedProjects++;
            if (success) gameState.successfulProjects++;
            
            // Actualizar reputaci√≥n
            gameState.reputation = Math.max(0, Math.min(100, gameState.reputation + (success ? 5 : -3)));
            
            addEvent(success ? 'success' : 'warning', 
                `Estrategia ${strategy}: ${success ? `√âxito! +$${revenue.toLocaleString()}` : 'Fracaso'}. Reputaci√≥n ${success ? '+' : '-'}${success ? 5 : 3}`);
            
            advanceYear();
            updateUI();
        }

        function getCurrentPhase() {
            return historicalPhases.find(phase => phase.year <= gameState.year).focus;
        }

        function getMultiplierByPhase(phase, strategy) {
            const multipliers = {
                distribution: { conservative: 1.2, balanced: 1.0, aggressive: 0.8 },
                labor: { conservative: 1.0, balanced: 1.1, aggressive: 0.9 },
                budget: { conservative: 0.9, balanced: 1.0, aggressive: 1.1 },
                monetization: { conservative: 0.8, balanced: 1.0, aggressive: 1.3 },
                ethics: { conservative: 1.1, balanced: 1.0, aggressive: 0.7 },
                identity: { conservative: 0.9, balanced: 1.1, aggressive: 1.0 },
                survival: { conservative: 1.3, balanced: 1.0, aggressive: 0.6 }
            };
            return multipliers[phase][strategy] || 1.0;
        }

        function calculateSuccessChance(strategy, multiplier) {
            const baseChance = {
                conservative: 0.7,
                balanced: 0.5,
                aggressive: 0.3
            };
            return baseChance[strategy] * multiplier * (gameState.morale / 100) * (gameState.reputation / 100);
        }

        function advanceYear() {
            gameState.year++;
            if (gameState.year > 2050) {
                endGame();
                return;
            }
            
            // Evento aleatorio basado en a√±o
            triggerYearEvent();
            
            // Recuperar moral
            gameState.morale = Math.min(100, gameState.morale + 5);
            
            // Actualizar problema actual
            const phase = historicalPhases.find(p => p.year <= gameState.year);
            document.getElementById('currentProblem').textContent = phase ? phase.problem : 'Nueva era de la industria.';
        }

        function triggerYearEvent() {
            const events = {
                2004: { type: 'warning', text: 'Caso EA Spouse expone crunch. La opini√≥n p√∫blica presiona.' },
                2008: { type: 'warning', text: 'Crisis financiera. Presupuestos se reducen temporalmente.' },
                2012: { type: 'info', text: 'Steam Greenlight democratiza el mercado. Indies emergen.' },
                2017: { type: 'danger', text: 'Loot box controversy. Reguladores amenazan con intervenci√≥n.' },
                2020: { type: 'success', text: 'Pandemia aumenta ventas digitales. Oportunidad de crecimiento.' },
                2023: { type: 'danger', text: 'Despidos masivos en industria. Talento disponible barato.' }
            };
            
            const event = events[gameState.year];
            if (event) {
                addEvent(event.type, event.text);
                // Aplicar efectos
                if (gameState.year === 2023 && event.type === 'danger') {
                    gameState.cash += 100000; // Talento barato
                }
            }
        }

        function startProject() {
            document.getElementById('projectModal').classList.add('active');
        }

        function selectProject(type, cost) {
            if (gameState.cash < cost) {
                addEvent('danger', `Cash insuficiente. Necesitas $${cost.toLocaleString()}`);
                return;
            }
            
            gameState.activeProject = {
                type: type,
                budget: cost,
                yearStarted: gameState.year,
                risk: type === 'aaa' ? 0.7 : type === 'aa' ? 0.5 : 0.3
            };
            
            gameState.cash -= cost;
            addEvent('info', `Proyecto ${type.toUpperCase()} iniciado. Budget: $${cost.toLocaleString()}`);
            closeModal();
            updateUI();
        }

        function hireStaff() {
            const cost = 50000;
            if (gameState.cash >= cost && gameState.team < gameState.maxTeam) {
                gameState.cash -= cost;
                gameState.team += 5;
                gameState.morale = Math.min(100, gameState.morale + 10);
                addEvent('success', 'Contrataste 5 desarrolladores. +10 moral.');
                updateUI();
            } else {
                addEvent('warning', 'No puedes contratar ahora.');
            }
        }

        function investTech() {
            const cost = 30000;
            if (gameState.cash >= cost) {
                gameState.cash -= cost;
                gameState.reputation = Math.min(100, gameState.reputation + 8);
                addEvent('success', 'Inversi√≥n en I+D completada. +8 reputaci√≥n.');
                updateUI();
            }
        }

        function closeModal() {
            document.getElementById('projectModal').classList.remove('active');
        }

        function addEvent(type, text) {
            const eventLog = document.getElementById('eventLog');
            const event = document.createElement('div');
            event.className = `event ${type}`;
            event.innerHTML = `<strong>A√±o ${gameState.year}:</strong> ${text}`;
            eventLog.insertBefore(event, eventLog.firstChild);
            
            while (eventLog.children.length > 20) {
                eventLog.removeChild(eventLog.lastChild);
            }
        }

        function updateUI() {
            document.getElementById('currentYear').textContent = gameState.year;
            document.getElementById('cash').textContent = `$${gameState.cash.toLocaleString()}`;
            document.getElementById('team').textContent = `${gameState.team} / ${gameState.maxTeam}`;
            document.getElementById('reputation').textContent = `${gameState.reputation}%`;
            document.getElementById('morale').textContent = `${gameState.morale}%`;
            document.getElementById('projects').textContent = `${gameState.successfulProjects} / ${gameState.completedProjects}`;
            document.getElementById('cashBar').style.width = `${Math.min(100, gameState.cash / 10000)}%`;
            document.getElementById('teamBar').style.width = `${(gameState.team / gameState.maxTeam) * 100}%`;
            document.getElementById('repBar').style.width = `${gameState.reputation}%`;
            document.getElementById('moraleBar').style.width = `${gameState.morale}%`;
            
            // Calcular estad√≠sticas
            const roi = gameState.completedProjects > 0 ? 
                ((gameState.totalRevenue / (gameState.completedProjects * 100000) - 1) * 100).toFixed(1) : 0;
            const successRate = gameState.completedProjects > 0 ? 
                (gameState.successfulProjects / gameState.completedProjects * 100).toFixed(1) : 0;
            
            document.getElementById('roi').textContent = `${roi}%`;
            document.getElementById('successRate').textContent = `${successRate}%`;
        }

        function saveGame() {
            localStorage.setItem('industrySimulatorSave', JSON.stringify({
                state: gameState,
                timestamp: Date.now()
            }));
            addEvent('success', 'Partida guardada autom√°ticamente.');
        }

        function loadGame() {
            const saved = localStorage.getItem('industrySimulatorSave');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(gameState, data.state);
                updateUI();
                addEvent('success', 'Partida cargada con √©xito.');
            }
        }

        function endGame() {
            alert(`¬°Fin del juego! Has llegado a 2050. Ingresos totales: $${gameState.totalRevenue.toLocaleString()}`);
        }

        // Auto-save cada 30 segundos
        setInterval(saveGame, 30000);

        // Inicializar
        updateUI();
    </script>
</body>
</html>
