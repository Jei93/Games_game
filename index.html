<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industry Evolution Simulator - Game Dev Tycoon</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a2e;
            --bg-card: #16213e;
            --bg-card-hover: #1e2a4a;
            --neon-blue: #00ffff;
            --neon-purple: #9d4edd;
            --neon-pink: #ff00ff;
            --neon-green: #00ff00;
            --neon-yellow: #ffff00;
            --neon-red: #ff3131;
            --text-primary: #ffffff;
            --text-secondary: #b8b8b8;
            --border: #2d2d44;
            --shadow: 0 0 20px rgba(157, 78, 221, 0.3);
        }

        body {
            font-family: 'Exo 2', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #1a0033 100%);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
        }

        /* ANIMACIONES */
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue); }
            50% { text-shadow: 0 0 20px var(--neon-purple), 0 0 30px var(--neon-purple); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .game-container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            height: 100vh;
            gap: 15px;
            padding: 15px;
        }

        /* SIDEBAR */
        .sidebar {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            overflow-y: auto;
            border: 2px solid var(--border);
            box-shadow: var(--shadow);
            animation: slideIn 0.5s ease-out;
        }

        .studio-header {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            border-radius: 10px;
            animation: glow 3s infinite;
        }

        .studio-name {
            font-size: 1.4rem;
            font-weight: 900;
            letter-spacing: 2px;
        }

        .resource-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .resource-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(157, 78, 221, 0.4);
        }

        .resource-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .resource-value {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--neon-blue);
        }

        .resource-bar {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .resource-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px currentColor;
        }

        .cash-fill { background: linear-gradient(90deg, var(--neon-green), #00cc00); }
        .team-fill { background: linear-gradient(90deg, var(--neon-blue), #0099ff); }
        .reputation-fill { background: linear-gradient(90deg, var(--neon-yellow), #cccc00); }
        .hype-fill { background: linear-gradient(90deg, var(--neon-purple), #cc00cc); }

        .action-button {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: var(--bg-card-hover);
            border: 2px solid var(--neon-blue);
            border-radius: 8px;
            color: var(--text-primary);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .action-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-blue);
        }

        .action-title {
            font-size: 0.9rem;
        }

        .action-cost {
            font-size: 0.7rem;
            color: var(--neon-red);
        }

        /* MAIN AREA */
        .main-area {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--border);
            box-shadow: var(--shadow);
            overflow-y: auto;
        }

        .main-header {
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            animation: slideDown 0.5s ease-out;
        }

        .year-counter {
            font-size: 3rem;
            font-weight: 900;
            color: var(--neon-blue);
            animation: glow 2s infinite;
        }

        .phase-text {
            font-size: 1.1rem;
            color: var(--text-primary);
            margin-top: 5px;
        }

        .problem-alert {
            background: var(--bg-card);
            border-left: 4px solid var(--neon-red);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            font-style: italic;
            color: var(--text-secondary);
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .card:hover {
            border-color: var(--neon-purple);
        }

        .card-title {
            font-size: 1.3rem;
            color: var(--neon-blue);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .option-button {
            background: var(--bg-card-hover);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .option-button:hover {
            border-color: var(--neon-purple);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(157, 78, 221, 0.3);
        }

        .option-button.selected {
            border-color: var(--neon-green);
            background: rgba(0, 255, 0, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.4);
        }

        /* EVENT PANEL */
        .event-panel {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--border);
            box-shadow: var(--shadow);
            overflow-y: auto;
            animation: slideIn 0.5s ease-out reverse;
        }

        .event-log {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .event-item {
            background: var(--bg-card);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--neon-blue);
            font-size: 0.85rem;
            animation: fadeIn 0.3s ease-out;
        }

        .event-item.danger { border-left-color: var(--neon-red); }
        .event-item.success { border-left-color: var(--neon-green); }
        .event-item.warning { border-left-color: var(--neon-yellow); }

        .event-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            z-index: 1000;
            place-items: center;
        }

        .modal.active {
            display: grid;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 2px solid var(--neon-purple);
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0 40px var(--shadow);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--neon-blue);
        }

        .close-btn {
            font-size: 2rem;
            color: var(--neon-red);
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-btn:hover {
            transform: rotate(90deg);
        }

        /* STATS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--neon-blue);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* NOTIFICATION */
        .notification {
            position: fixed;
            top: 20px;
            right: -400px;
            background: var(--bg-secondary);
            border: 2px solid var(--neon-green);
            border-radius: 12px;
            padding: 20px;
            max-width: 350px;
            box-shadow: var(--shadow);
            transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000;
        }

        .notification.show {
            right: 20px;
        }

        .notification-title {
            color: var(--neon-green);
            font-weight: 800;
            margin-bottom: 5px;
        }

        .notification-text {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        /* ACHIEVEMENT */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            padding: 30px 50px;
            border-radius: 20px;
            box-shadow: 0 0 60px var(--neon-purple);
            z-index: 3000;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .achievement-popup.active {
            transform: translate(-50%, -50%) scale(1);
        }

        .achievement-text {
            font-size: 1.5rem;
            font-weight: 900;
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .game-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
                height: auto;
            }
            
            .sidebar, .event-panel {
                max-height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- SIDEBAR - RECURSOS -->
        <aside class="sidebar">
            <div class="studio-header">
                <div class="studio-name" id="studioName">üî• GARAGE STUDIOS</div>
                <div style="font-size: 0.8rem; color: var(--text-secondary);">NIVEL 1</div>
            </div>

            <div class="resource-card">
                <div class="resource-label">
                    <span>üí∞ CAJA</span>
                    <span class="resource-value" id="cashDisplay">$500,000</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-fill cash-fill" id="cashBar" style="width: 50%"></div>
                </div>
            </div>

            <div class="resource-card">
                <div class="resource-label">
                    <span>üë• EQUIPO</span>
                    <span class="resource-value" id="teamDisplay">15 / 50</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-fill team-fill" id="teamBar" style="width: 30%"></div>
                </div>
            </div>

            <div class="resource-card">
                <div class="resource-label">
                    <span>‚≠ê REPUTACI√ìN</span>
                    <span class="resource-value" id="repDisplay">65%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-fill reputation-fill" id="repBar" style="width: 65%"></div>
                </div>
            </div>

            <div class="resource-card">
                <div class="resource-label">
                    <span>üî• HYPE</span>
                    <span class="resource-value" id="hypeDisplay">30%</span>
                </div>
                <div class="resource-bar">
                    <div class="resource-fill hype-fill" id="hypeBar" style="width: 30%"></div>
                </div>
            </div>

            <button class="action-button" onclick="contratarPersonal()">
                <span class="action-title">üíº CONTRATAR</span>
                <span class="action-cost">-$50,000</span>
            </button>
            <button class="action-button" onclick="invertirMarketing()">
                <span class="action-title">üì¢ MARKETING</span>
                <span class="action-cost">-$30,000</span>
            </button>
            <button class="action-button" onclick="investigarTecnologia()">
                <span class="action-title">üî¨ I+D</span>
                <span class="action-cost">-$75,000</span>
            </button>
            <button class="action-button" onclick="mudarOficina()">
                <span class="action-title">üè¢ MUDANZA</span>
                <span class="action-cost">-$150,000</span>
            </button>
        </aside>

        <!-- MAIN GAME AREA -->
        <main class="main-area">
            <div class="main-header">
                <div style="font-size: 1rem; color: var(--text-secondary);">üìä INDUSTRY EVOLUTION SIMULATOR</div>
                <div class="year-counter" id="yearDisplay">2000</div>
                <div class="phase-text" id="phaseText">ERA RETAIL (2000-2004)</div>
            </div>

            <div class="problem-alert" id="problemAlert">
                Modelo retail, primeros DRM; industria AAA en expansi√≥n controlada. Los indies son invisibles.
            </div>

            <div class="card">
                <h3 class="card-title">üéØ DESARROLLAR JUEGO</h3>
                <p style="color: var(--text-secondary); margin-bottom: 15px;">Crea tu pr√≥ximo proyecto. El mercado espera innovaci√≥n.</p>
                <div class="option-grid">
                    <button class="option-button" onclick="abrirModalProyecto()">
                        <span style="font-size: 2rem;">üéÆ</span>
                        <strong>NUEVO PROYECTO</strong>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">G√©nero, Tema, Plataforma</span>
                    </button>
                    <button class="option-button" id="btnContinuar" style="display: none;" onclick="continuarProyecto()">
                        <span style="font-size: 2rem;">‚öôÔ∏è</span>
                        <strong id="proyectoActivoNombre">CONTINUAR</strong>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);" id="proyectoActivoProgreso">0%</span>
                    </button>
                </div>
            </div>

            <div class="card">
                <h3 class="card-title">‚ö° DECISIONES R√ÅPIDAS</h3>
                <div class="option-grid">
                    <button class="option-button" onclick="activarCrunch()">
                        <span style="font-size: 2rem;">üî•</span>
                        <strong>CRUNCH MODE</strong>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">+Velocidad, -Moral</span>
                    </button>
                    <button class="option-button" onclick="retiroEquipo()">
                        <span style="font-size: 2rem;">üèñÔ∏è</span>
                        <strong>RETIRO EQUIPO</strong>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">+Moral, -$20K</span>
                    </button>
                    <button class="option-button" onclick="trabajoContrato()">
                        <span style="font-size: 2rem;">üìã</span>
                        <strong>CONTRATO</strong>
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">+$40K Seguro</span>
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-number" id="totalJuegos">0</div>
                    <div class="stat-label">JUEGOS LANZADOS</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="notaMedia">‚Äî</div>
                    <div class="stat-label">NOTA MEDIA</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="ingresosTotales">$0</div>
                    <div class="stat-label">INGRESOS TOTALES</div>
                </div>
                <div class="stat-box">
                    <div class="stat-number" id="marketShare">0%</div>
                    <div class="stat-label">MARKET SHARE</div>
                </div>
            </div>
        </main>

        <!-- EVENT PANEL -->
        <aside class="event-panel">
            <h2 style="color: var(--neon-blue); margin-bottom: 15px;">
                üì∞ NOTICIAS DE LA INDUSTRIA
            </h2>
            <div class="event-log" id="eventLog">
                <div class="event-item">
                    <div class="event-time">A√±o 2000 - Mes 1</div>
                    <div class="event-text">üéÆ Tu estudio se funda en un garage. La aventura comienza.</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- MODAL CREAR PROYECTO -->
    <div class="modal" id="modalProyecto">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üéÆ CREAR NUEVO JUEGO</h2>
                <span class="close-btn" onclick="cerrarModalProyecto()">&times;</span>
            </div>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                <!-- G√âNEROS -->
                <div>
                    <h4 style="color: var(--neon-pink); margin-bottom: 10px;">üé≤ G√âNEROS</h4>
                    <button class="option-button" data-tipo="genero" data-valor="accion" onclick="seleccionarOpcion(this)">
                        <span>üéÆ</span> ACCI√ìN
                    </button>
                    <button class="option-button" data-tipo="genero" data-valor="rpg" onclick="seleccionarOpcion(this)">
                        <span>‚öîÔ∏è</span> RPG
                    </button>
                    <button class="option-button" data-tipo="genero" data-valor="estrategia" onclick="seleccionarOpcion(this)">
                        <span>üó∫Ô∏è</span> ESTRATEGIA
                    </button>
                    <button class="option-button" data-tipo="genero" data-valor="puzzle" onclick="seleccionarOpcion(this)">
                        <span>üß©</span> PUZZLE
                    </button>
                    <button class="option-button" data-tipo="genero" data-valor="terror" onclick="seleccionarOpcion(this)">
                        <span>üëª</span> TERROR
                    </button>
                    <button class="option-button" data-tipo="genero" data-valor="simulacion" onclick="seleccionarOpcion(this)">
                        <span>üè≠</span> SIMULACI√ìN
                    </button>
                </div>

                <!-- TEMAS -->
                <div>
                    <h4 style="color: var(--neon-pink); margin-bottom: 10px;">üé® TEMAS</h4>
                    <button class="option-button" data-tipo="tema" data-valor="espacial" onclick="seleccionarOpcion(this)">
                        <span>üöÄ</span> ESPACIAL
                    </button>
                    <button class="option-button" data-tipo="tema" data-valor="medieval" onclick="seleccionarOpcion(this)">
                        <span>üè∞</span> MEDIEVAL
                    </button>
                    <button class="option-button" data-tipo="tema" data-valor="cyberpunk" onclick="seleccionarOpcion(this)">
                        <span>üåÜ</span> CYBERPUNK
                    </button>
                    <button class="option-button" data-tipo="tema" data-valor="fantasia" onclick="seleccionarOpcion(this)">
                        <span>ü¶Ñ</span> FANTAS√çA
                    </button>
                    <button class="option-button" data-tipo="tema" data-valor="zombies" onclick="seleccionarOpcion(this)">
                        <span>üßü</span> ZOMBIES
                    </button>
                    <button class="option-button" data-tipo="tema" data-valor="deportes" onclick="seleccionarOpcion(this)">
                        <span>‚öΩ</span> DEPORTES
                    </button>
                </div>

                <!-- PLATAFORMAS -->
                <div>
                    <h4 style="color: var(--neon-pink); margin-bottom: 10px;">üì∫ PLATAFORMAS</h4>
                    <button class="option-button" data-tipo="plataforma" data-valor="pc" onclick="seleccionarOpcion(this)">
                        <span>üíª</span> PC
                    </button>
                    <button class="option-button" data-tipo="plataforma" data-valor="consola" onclick="seleccionarOpcion(this)">
                        <span>üéÆ</span> CONSOLA
                    </button>
                    <button class="option-button" data-tipo="plataforma" data-valor="movil" onclick="seleccionarOpcion(this)">
                        <span>üì±</span> M√ìVIL
                    </button>
                    <button class="option-button" data-tipo="plataforma" data-valor="vr" onclick="seleccionarOpcion(this)">
                        <span>ü•Ω</span> VR
                    </button>
                </div>
            </div>

            <div style="margin-top: 25px;">
                <h4 style="color: var(--neon-yellow); margin-bottom: 10px;">üí∞ PRESUPUESTO DE DESARROLLO</h4>
                <input type="range" id="budgetSlider" min="50000" max="500000" value="150000" 
                       style="width: 100%; height: 8px; background: var(--border); border-radius: 5px; outline: none; cursor: pointer;">
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9rem;">
                    <span>MIN: $50K</span>
                    <span style="color: var(--neon-blue); font-weight: 800;" id="budgetValue">$150K</span>
                    <span>MAX: $500K</span>
                </div>
            </div>

            <div style="display: flex; gap: 15px; margin-top: 25px;">
                <button class="action-button" onclick="cancelarProyecto()" style="flex: 1; border-color: var(--neon-red);">
                    <span class="action-title">‚ùå CANCELAR</span>
                </button>
                <button class="action-button" onclick="confirmarProyecto()" style="flex: 2; border-color: var(--neon-green);">
                    <span class="action-title">‚úÖ INICIAR PROYECTO</span>
                    <span class="action-cost" id="projectCost">COSTO: $150K</span>
                </button>
            </div>
        </div>
    </div>

    <!-- NOTIFICACI√ìN -->
    <div class="notification" id="notificacion">
        <div class="notification-title" id="notificacionTitulo">T√çTULO</div>
        <div class="notification-text" id="notificacionTexto">Mensaje de notificaci√≥n</div>
    </div>

    <!-- LOGRO -->
    <div class="achievement-popup" id="logroPopup">
        <div class="achievement-text" id="logroTexto">üéñÔ∏è ¬°LOGRO DESBLOQUEADO!</div>
    </div>

    <script>
        // üéÆ ESTADO DEL JUEGO
        const estadoJuego = {
            a√±o: 2000,
            mes: 1,
            caja: 500000,
            equipo: 15,
            maxEquipo: 50,
            reputacion: 65,
            hype: 30,
            moral: 75,
            juegosCompletados: [],
            proyectoActivo: null,
            ingresosTotales: 0,
            nivelEstudio: 1,
            motoresDesbloqueados: ['2D B√°sico'],
            marketShare: 0,
            crunchMode: false,
            descuentoContratacion: false
        };

        // üìä DATOS HIST√ìRICOS DEL EXCEL
        const datosHistoria = {
            a√±os: [2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],
            fases: [0,0,0,0,1,1,1,1,1,2,2,2,3,3,3,3,3,4,4,4,5,5,6,6,6,6],
            problemas: [
                "Modelo retail, primeros DRM. Los indies son invisibles.",
                "Modelo retail, primeros DRM",
                "Modelo retail, primeros DRM",
                "Modelo retail, primeros DRM",
                "üí• Caso 'EA Spouse' revela crunch masivo",
                "Altos costes, crisis creativa AAA",
                "Altos costes, crisis creativa AAA",
                "Altos costes, crisis creativa AAA",
                "Altos costes, crisis creativa AAA",
                "Altos costes. Minecraft alpha aparece",
                "Altos costes, crisis creativa AAA",
                "Altos costes, crisis creativa AAA",
                "üì± Microtransacciones emergentes",
                "Microtransacciones y DLCs",
                "Servicios en vivo dominan",
                "Menos riesgo creativo",
                "Multijugador competitivo",
                "üé∞ Loot boxes, monetizaci√≥n agresiva",
                "Crunch masivo, regulaci√≥n amenaza",
                "Calidad AA supera expectativas",
                "üè† Pandemia, ventas digitales +200%",
                "Live service, fusiones gigantes",
                "üî• Elden Ring vs despidos masivos",
                "Despidos, indies salvan la industria",
                "AA e indies dominan cr√≠ticas",
                "Futuro incierto, creatividad gana"
            ]
        };

        // üé≤ BASE DE DATOS DE COMBOS
        const baseDatos = {
            generos: {
                accion: { nombre: "Acci√≥n", base: 70, riesgo: 0.3 },
                rpg: { nombre: "RPG", base: 80, riesgo: 0.5 },
                estrategia: { nombre: "Estrategia", base: 75, riesgo: 0.4 },
                puzzle: { nombre: "Puzzle", base: 65, riesgo: 0.2 },
                terror: { nombre: "Terror", base: 85, riesgo: 0.6 },
                simulacion: { nombre: "Simulaci√≥n", base: 60, riesgo: 0.3 }
            },
            temas: {
                espacial: { nombre: "Espacial", multi: { accion: 1.2, simulacion: 1.3, rpg: 1.1 } },
                medieval: { nombre: "Medieval", multi: { rpg: 1.4, estrategia: 1.3, accion: 1.1 } },
                cyberpunk: { nombre: "Cyberpunk", multi: { rpg: 1.3, accion: 1.2, terror: 1.1 } },
                fantasia: { nombre: "Fantas√≠a", multi: { rpg: 1.5, estrategia: 1.1, accion: 1.0 } },
                zombies: { nombre: "Zombies", multi: { terror: 1.4, accion: 1.2, estrategia: 0.8 } },
                deportes: { nombre: "Deportes", multi: { simulacion: 1.3, accion: 0.9, puzzle: 0.7 } }
            },
            plataformas: {
                pc: { nombre: "PC", alcance: 1.0, costo: 1.0 },
                consola: { nombre: "Consola", alcance: 1.2, costo: 1.3 },
                movil: { nombre: "M√≥vil", alcance: 0.8, costo: 0.6 },
                vr: { nombre: "VR", alcance: 0.3, costo: 1.8 }
            }
        };

        // üéÆ INICIALIZACI√ìN
        document.addEventListener('DOMContentLoaded', () => {
            actualizarUI();
            mostrarNotificacion('üéÆ ¬°Bienvenido!', 'Usa datos hist√≥ricos para dominar la industria');
        });

        // üìä ACTUALIZAR UI
        function actualizarUI() {
            document.getElementById('yearDisplay').textContent = estadoJuego.a√±o;
            document.getElementById('cashDisplay').textContent = `$${estadoJuego.caja.toLocaleString()}`;
            document.getElementById('teamDisplay').textContent = `${estadoJuego.equipo} / ${estadoJuego.maxEquipo}`;
            document.getElementById('repDisplay').textContent = `${estadoJuego.reputacion}%`;
            document.getElementById('hypeDisplay').textContent = `${estadoJuego.hype}%`;

            document.getElementById('cashBar').style.width = `${Math.min(100, estadoJuego.caja / 10000)}%`;
            document.getElementById('teamBar').style.width = `${(estadoJuego.equipo / estadoJuego.maxEquipo) * 100}%`;
            document.getElementById('repBar').style.width = `${estadoJuego.reputacion}%`;
            document.getElementById('hypeBar').style.width = `${estadoJuego.hype}%`;

            const fases = ["ERA RETAIL", "CRISIS CREATIVA", "ECLOSION INDIE", "MONETIZACI√ìN", "√âTICA & LOOT", "LIVE SERVICE", "REESTRUCTURACI√ìN"];
            document.getElementById('phaseText').textContent = `${fases[datosHistoria.fases[estadoJuego.a√±o - 2000]]} (${estadoJuego.a√±o})`;
            document.getElementById('problemAlert').textContent = datosHistoria.problemas[estadoJuego.a√±o - 2000];

            document.getElementById('totalJuegos').textContent = estadoJuego.juegosCompletados.length;
            document.getElementById('notaMedia').textContent = estadoJuego.juegosCompletados.length > 0 ? 
                (estadoJuego.juegosCompletados.reduce((a,b) => a + b.nota, 0) / estadoJuego.juegosCompletados.length).toFixed(1) : '‚Äî';
            document.getElementById('ingresosTotales').textContent = `$${estadoJuego.ingresosTotales.toLocaleString()}`;
            document.getElementById('marketShare').textContent = `${(Math.min(100, estadoJuego.ingresosTotales / 100000)).toFixed(1)}%`;

            actualizarProyectoActivo();
        }

        // üéØ MODAL PROYECTO
        function abrirModalProyecto() {
            if(estadoJuego.proyectoActivo) {
                mostrarNotificacion('‚ö†Ô∏è Proyecto activo', 'Termina el juego actual primero');
                return;
            }
            document.getElementById('modalProyecto').classList.add('active');
        }

        function cerrarModalProyecto() {
            document.getElementById('modalProyecto').classList.remove('active');
            document.querySelectorAll('.option-button').forEach(btn => btn.classList.remove('selected'));
        }

        function seleccionarOpcion(btn) {
            const tipo = btn.dataset.tipo;
            document.querySelectorAll(`[data-tipo="${tipo}"]`).forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
        }

        document.getElementById('budgetSlider').addEventListener('input', function() {
            document.getElementById('budgetValue').textContent = `$${parseInt(this.value).toLocaleString()}`;
            document.getElementById('projectCost').textContent = `COSTO: $${parseInt(this.value).toLocaleString()}`;
        });

        function cancelarProyecto() {
            cerrarModalProyecto();
        }

        function confirmarProyecto() {
            const genero = document.querySelector('[data-tipo="genero"].selected')?.dataset.valor;
            const tema = document.querySelector('[data-tipo="tema"].selected')?.dataset.valor;
            const plataforma = document.querySelector('[data-tipo="plataforma"].selected')?.dataset.valor;
            const presupuesto = parseInt(document.getElementById('budgetSlider').value);

            if(!genero || !tema || !plataforma) {
                mostrarNotificacion('‚ùå Selecci√≥n incompleta', 'Elige g√©nero, tema y plataforma');
                return;
            }
            
            if(estadoJuego.caja < presupuesto) {
                mostrarNotificacion('‚ùå Caja insuficiente', `Necesitas $${presupuesto.toLocaleString()}`);
                return;
            }

            estadoJuego.proyectoActivo = {
                genero, tema, plataforma, presupuesto,
                progreso: 0, calidad: 0, hype: estadoJuego.hype,
                inicioA√±o: estadoJuego.a√±o, inicioMes: estadoJuego.mes,
                notaEsperada: calcularNotaEsperada(genero, tema, plataforma, presupuesto)
            };

            estadoJuego.caja -= presupuesto;
            mostrarNotificacion('üéÆ ¬°Proyecto iniciado!', `${baseDatos.generos[genero].nombre} + ${baseDatos.temas[tema].nombre}`);
            cerrarModalProyecto();
            actualizarUI();
        }

        function calcularNotaEsperada(genero, tema, plataforma, presupuesto) {
            const base = baseDatos.generos[genero].base;
            const multTema = baseDatos.temas[tema].multi[genero] || 1.0;
            const multPresupuesto = Math.min(1.5, presupuesto / 100000);
            const multRep = estadoJuego.reputacion / 100;
            const multHype = estadoJuego.hype / 100;
            return base * multTema * multPresupuesto * multRep * multHype;
        }

        function actualizarProyectoActivo() {
            const btn = document.getElementById('btnContinuar');
            if(estadoJuego.proyectoActivo) {
                btn.style.display = 'block';
                document.getElementById('proyectoActivoNombre').textContent = `${baseDatos.generos[estadoJuego.proyectoActivo.genero].nombre}`;
                document.getElementById('proyectoActivoProgreso').textContent = `${estadoJuego.proyectoActivo.progreso}%`;
            } else {
                btn.style.display = 'none';
            }
        }

        function continuarProyecto() {
            if(!estadoJuego.proyectoActivo) return;

            const velocidad = estadoJuego.crunchMode ? 25 : 15;
            const penalidad = estadoJuego.crunchMode ? 5 : 0;

            estadoJuego.proyectoActivo.progreso += velocidad;
            estadoJuego.moral = Math.max(0, estadoJuego.moral - penalidad);
            estadoJuego.mes++;

            if(Math.random() < 0.1) eventoDesarrollo();

            if(estadoJuego.proyectoActivo.progreso >= 100) lanzarJuego();

            actualizarUI();
        }

        function eventoDesarrollo() {
            const eventos = [
                { texto: "üêõ ¬°Bug cr√≠tico! -10% progreso", efecto: () => { estadoJuego.proyectoActivo.progreso -= 10; } },
                { texto: "‚≠ê Programadora estrella se une +15%", efecto: () => { estadoJuego.proyectoActivo.progreso += 15; } },
                { texto: "üí° Inspiraci√≥n +5 calidad", efecto: () => { estadoJuego.proyectoActivo.calidad += 5; } }
            ];
            const ev = eventos[Math.floor(Math.random() * eventos.length)];
            ev.efecto();
            agregarEvento('warning', ev.texto);
        }

        function lanzarJuego() {
            const proyecto = estadoJuego.proyectoActivo;
            const nota = calcularNotaFinal(proyecto);
            const ventas = calcularVentas(proyecto, nota);

            estadoJuego.caja += ventas;
            estadoJuego.ingresosTotales += ventas;
            estadoJuego.juegosCompletados.push({...proyecto, nota, ventas, a√±o: estadoJuego.a√±o});

            const cambioRep = nota > 80 ? 8 : nota > 60 ? 3 : -5;
            estadoJuego.reputacion = Math.max(0, Math.min(100, estadoJuego.reputacion + cambioRep));
            estadoJuego.hype = Math.max(10, estadoJuego.hype - 30);
            estadoJuego.moral = Math.min(100, estadoJuego.moral + 15);

            agregarEvento(nota > 80 ? 'success' : nota > 50 ? 'info' : 'danger',
                `üéÆ ¬°${baseDatos.generos[proyecto.genero].nombre} lanzado! Nota: ${nota.toFixed(1)}/100. Ganancias: $${ventas.toLocaleString()}`);

            if(Math.random() < 0.3) eventoPostLanzamiento(proyecto, ventas);

            estadoJuego.proyectoActivo = null;
            actualizarUI();
        }

        function calcularNotaFinal(proyecto) {
            const base = proyecto.notaEsperada;
            const random = 0.8 + Math.random() * 0.4;
            const moral = estadoJuego.moral / 100;
            const equipo = Math.min(1.2, estadoJuego.equipo / 30);
            return Math.min(100, base * random * moral * equipo);
        }

        function calcularVentas(proyecto, nota) {
            const base = proyecto.presupuesto * 3;
            const bonusScore = (nota - 50) / 50;
            const bonusHype = proyecto.hype / 100;
            const multRep = estadoJuego.reputacion / 100;
            return Math.floor(base * (1 + bonusScore) * (1 + bonusHype) * multRep);
        }

        function eventoPostLanzamiento(proyecto, ventas) {
            if(Math.random() < 0.3) {
                const dlc = ventas * 0.2;
                estadoJuego.caja += dlc;
                estadoJuego.ingresosTotales += dlc;
                agregarEvento('success', `üì¶ ¬°DLC genera $${dlc.toLocaleString()} extra!`);
            }
            if(Math.random() < 0.1) {
                estadoJuego.caja += 50000;
                estadoJuego.reputacion = Math.min(100, estadoJuego.reputacion + 10);
                agregarEvento('success', `üèÜ ¬°Game of the Year! +$50K, +10 rep`);
            }
        }

        function activarCrunch() {
            estadoJuego.crunchMode = !estadoJuego.crunchMode;
            const status = estadoJuego.crunchMode ? 'ACTIVADO' : 'DESACTIVADO';
            agregarEvento('warning', `üî• CRUNCH ${status} - Velocidad +25%, -5 moral/mes`);
        }

        function retiroEquipo() {
            const costo = 20000;
            if(estadoJuego.caja >= costo) {
                estadoJuego.caja -= costo;
                estadoJuego.moral = Math.min(100, estadoJuego.moral + 15);
                agregarEvento('success', 'üèñÔ∏è Retiro relaja al equipo. +15 moral');
                actualizarUI();
            } else {
                mostrarNotificacion('‚ùå Caja insuficiente', 'Necesitas $20,000');
            }
        }

        function trabajoContrato() {
            estadoJuego.caja += 40000;
            estadoJuego.ingresosTotales += 40000;
            agregarEvento('info', 'üìã Contrato indie completo. +$40,000');
            actualizarUI();
        }

        function contratarPersonal() {
            const costo = estadoJuego.descuentoContratacion ? 25000 : 50000;
            if(estadoJuego.caja >= costo && estadoJuego.equipo < estadoJuego.maxEquipo) {
                estadoJuego.caja -= costo;
                estadoJuego.equipo += 1;
                estadoJuego.moral = Math.min(100, estadoJuego.moral + 5);
                agregarEvento('success', 'üíº Nuevo miembro en el equipo');
                actualizarUI();
            } else {
                mostrarNotificacion('‚ùå No puedes contratar', estadoJuego.equipo >= estadoJuego.maxEquipo ? 'Equipo al m√°ximo' : 'Caja insuficiente');
            }
        }

        function invertirMarketing() {
            const costo = 30000;
            if(estadoJuego.caja >= costo) {
                estadoJuego.caja -= costo;
                estadoJuego.hype = Math.min(100, estadoJuego.hype + 20);
                agregarEvento('info', 'üì¢ Campa√±a de marketing. +20 hype');
                actualizarUI();
            } else {
                mostrarNotificacion('‚ùå Caja insuficiente', 'Necesitas $30,000');
            }
        }

        function investigarTecnologia() {
            const costo = 75000;
            if(estadoJuego.caja >= costo) {
                estadoJuego.caja -= costo;
                estadoJuego.motoresDesbloqueados.push('3D Avanzado');
                agregarEvento('success', 'üîì Motor 3D Avanzado desbloqueado');
                actualizarUI();
            } else {
                mostrarNotificacion('‚ùå Caja insuficiente', 'Necesitas $75,000');
            }
        }

        function mudarOficina() {
            const costo = 150000;
            if(estadoJuego.caja >= costo && estadoJuego.nivelEstudio < 5) {
                estadoJuego.caja -= costo;
                estadoJuego.nivelEstudio++;
                estadoJuego.maxEquipo += 25;
                estadoJuego.moral = Math.min(100, estadoJuego.moral + 20);
                agregarEvento('success', `üè¢ ¬°Oficina nivel ${estadoJuego.nivelEstudio}! +25 equipo m√°ximo`);
                document.getElementById('studioName').textContent = `‚≠ê ESTUDIO NIVEL ${estadoJuego.nivelEstudio}`;
                actualizarUI();
            } else {
                mostrarNotificacion('‚ùå No puedes mudarte', estadoJuego.nivelEstudio >= 5 ? 'M√°ximo nivel' : 'Caja insuficiente');
            }
        }

        function agregarEvento(tipo, texto) {
            const log = document.getElementById('eventLog');
            const evento = document.createElement('div');
            evento.className = `event-item ${tipo}`;
            evento.innerHTML = `<div class="event-time">A√ëO ${estadoJuego.a√±o} - MES ${estadoJuego.mes}</div><div class="event-text">${texto}</div>`;
            log.insertBefore(evento, log.firstChild);
            while(log.children.length > 15) log.removeChild(log.lastChild);
        }

        function mostrarNotificacion(titulo, texto) {
            document.getElementById('notificacionTitulo').textContent = titulo;
            document.getElementById('notificacionTexto').textContent = texto;
            const notif = document.getElementById('notificacion');
            notif.classList.add('show');
            setTimeout(() => notif.classList.remove('show'), 4000);
        }

        // üéñÔ∏è SISTEMA DE LOGROS
        const logros = {
            primero: { nombre: "Debutante", descripcion: "Tu primer juego", desbloqueado: false },
            hit: { nombre: "Golpe de Suerte", descripcion: "Juego >85/100", desbloqueado: false },
            experto: { nombre: "Veterano", descripcion: "10 juegos lanzados", desbloqueado: false },
            millonario: { nombre: "Millonario", descripcion: "$1M en ingresos", desbloqueado: false }
        };

        function comprobarLogros() {
            if(estadoJuego.juegosCompletados.length === 1 && !logros.primero.desbloqueado) {
                desbloquearLogro(logros.primero);
            }
            if(estadoJuego.juegosCompletados.length >= 10 && !logros.experto.desbloqueado) {
                desbloquearLogro(logros.experto);
            }
            if(estadoJuego.ingresosTotales >= 1000000 && !logros.millonario.desbloqueado) {
                desbloquearLogro(logros.millonario);
            }
            const hit = estadoJuego.juegosCompletados.find(j => j.nota >= 85);
            if(hit && !logros.hit.desbloqueado) {
                desbloquearLogro(logros.hit);
            }
        }

        function desbloquearLogro(logro) {
            logro.desbloqueado = true;
            document.getElementById('logroTexto').textContent = `üéñÔ∏è ${logro.nombre}: ${logro.descripcion}`;
            const popup = document.getElementById('logroPopup');
            popup.classList.add('active');
            setTimeout(() => popup.classList.remove('active'), 5000);
            agregarEvento('success', `üèÜ ¬°Logro: ${logro.nombre}!`);
        }

        // üíæ GUARDADO
        function guardarJuego() {
            localStorage.setItem('industrySimPro', JSON.stringify(estadoJuego));
            mostrarNotificacion('üíæ Guardado', 'Partida guardada autom√°ticamente');
        }

        function cargarJuego() {
            const guardado = localStorage.getItem('industrySimPro');
            if(guardado) {
                Object.assign(estadoJuego, JSON.parse(guardado));
                actualizarUI();
                mostrarNotificacion('üìÇ Cargado', 'Partida recuperada');
            }
        }

        // Eventos teclado
        document.addEventListener('keydown', (e) => {
            if(e.code === 'Space' && estadoJuego.proyectoActivo) {
                e.preventDefault();
                continuarProyecto();
            }
        });

        // Auto-guardado
        setInterval(guardarJuego, 60000);

        // Cargar al inicio
        cargarJuego();
    </script>
</body>
</html>
</body>
</html>
